<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSR Helper: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        /* --- 1. –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –¢–ï–ú–´ --- */
        :root {
            /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–∞ (Dark Blue) */
            --primary: #6366f1;
            --primary-glow: rgba(99, 102, 241, 0.5);
            --bg-grad-1: #1e293b;
            --bg-grad-2: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --card-hover: rgba(51, 65, 85, 0.8);
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --warning: #fbbf24;
            --warning-bg: rgba(251, 191, 36, 0.15);
            --danger: #ef4444;
            --danger-bg: rgba(239, 68, 68, 0.15);
        }

        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ */
        [data-theme="light"] {
            --bg-grad-1: #e2e8f0;
            --bg-grad-2: #f8fafc;
            --card-bg: rgba(255, 255, 255, 0.8);
            --card-hover: #ffffff;
            --text-main: #0f172a;
            --text-muted: #64748b;
            --primary-glow: rgba(99, 102, 241, 0.2);
            --warning: #d97706;
            --warning-bg: rgba(217, 119, 6, 0.1);
        }

        /* –ß–µ—Ä–Ω–∞—è —Ç–µ–º–∞ (AMOLED) */
        [data-theme="black"] {
            --bg-grad-1: #000000;
            --bg-grad-2: #050505;
            --card-bg: rgba(20, 20, 20, 0.9);
            --card-hover: #262626;
            --text-main: #ffffff;
            --text-muted: #a3a3a3;
        }

        /* --- 2. –°–ö–†–´–í–ê–ï–ú –ü–û–õ–û–°–£ –ü–†–û–ö–†–£–¢–ö–ò --- */
        ::-webkit-scrollbar { width: 0; background: transparent; }
        html { scrollbar-width: none; }
        body { -ms-overflow-style: none; }

        /* --- 3. –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò --- */
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top, var(--bg-grad-1), var(--bg-grad-2));
            background-attachment: fixed;
            background-size: cover;
            color: var(--text-main);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            transition: background 0.5s ease, color 0.5s ease;
            /* –°–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —á—Ç–æ–±—ã –Ω–µ –º–∏–≥–∞–ª */
            display: none; 
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            text-align: center;
            font-weight: 800;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #fff 0%, #94a3b8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            color: var(--text-main); 
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        [data-theme="light"] h1 {
            background: linear-gradient(135deg, #475569 0%, #0f172a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            text-align: center;
            color: var(--text-muted);
            margin-bottom: 30px;
            font-size: 0.9rem;
        }

        kbd {
            background: rgba(255,255,255,0.1);
            padding: 4px 8px;
            border-radius: 6px;
            border: 1px solid rgba(255,255,255,0.2);
            font-family: monospace;
            box-shadow: 0 2px 0 rgba(0,0,0,0.5);
        }
        
        [data-theme="light"] kbd {
             background: rgba(0,0,0,0.05);
             border-color: rgba(0,0,0,0.1);
             box-shadow: none;
        }

        /* –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ */
        .alert-box {
            background: var(--danger-bg);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 40px;
            text-align: center;
            backdrop-filter: blur(5px);
        }
        .alert-box strong { color: #ff6b6b; letter-spacing: 0.5px; }
        .alert-box p { margin: 5px 0 0; font-size: 0.9em; color: var(--text-muted); }

        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .category-block { margin-bottom: 50px; }

        .category-title {
            color: var(--primary);
            font-size: 1.1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-glow);
            display: inline-block;
            text-shadow: 0 0 20px var(--primary-glow);
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–∞–≤–∏–ª–∞ */
        .rule-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--card-bg);
            margin-bottom: 12px;
            border-radius: 12px;
            padding: 16px 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
        }
        
        [data-theme="light"] .rule-row { border-color: rgba(0,0,0,0.05); }

        .rule-row:hover {
            transform: translateX(5px);
            background: var(--card-hover);
            border-color: var(--primary);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .rule-name {
            flex: 1;
            padding-right: 20px;
            font-weight: 500;
            line-height: 1.4;
        }

        .rule-punishment {
            flex: 0 0 auto;
            text-align: right;
            color: var(--warning);
            font-size: 0.85rem;
            font-weight: 600;
            background: var(--warning-bg);
            padding: 6px 12px;
            border-radius: 8px;
            white-space: pre-wrap;
            max-width: 40%;
        }

        .severe {
            color: #f87171;
            background: var(--danger-bg);
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.1);
        }

        /* –ö–Ω–æ–ø–∫–∞ –ù–∞–∑–∞–¥ */
        .back-btn {
            background: transparent;
            color: var(--text-muted);
            border: 1px solid rgba(128,128,128, 0.3);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
            margin-bottom: 20px;
            display: inline-block;
        }
        .back-btn:hover { background: rgba(255,255,255,0.1); color: var(--text-main); }
        [data-theme="light"] .back-btn:hover { background: rgba(0,0,0,0.05); }


        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∏—Å–∫–∞ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(12px);
            z-index: 1000;
            justify-content: center;
            align-items: flex-start;
            padding-top: 100px;
            animation: fadeIn 0.2s;
        }

        .modal-content {
            background: var(--bg-grad-1);
            width: 90%;
            max-width: 700px;
            border-radius: 16px;
            border: 1px solid var(--primary);
            box-shadow: 0 0 40px var(--primary-glow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 70vh;
        }

        .search-header { padding: 20px; background: rgba(0,0,0,0.1); border-bottom: 1px solid rgba(255,255,255,0.05); }

        input#search-input {
            width: 100%;
            background: transparent;
            border: none;
            color: var(--text-main);
            font-size: 1.2rem;
            outline: none;
            font-family: 'Inter', sans-serif;
        }
        input#search-input::placeholder { color: var(--text-muted); }

        .search-results { overflow-y: auto; padding: 0; }

        .result-item {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            cursor: pointer;
            transition: 0.2s;
        }
        .result-item:hover { background: var(--card-hover); }
        .result-category { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px; }
        
        .result-highlight {
            background: rgba(99, 102, 241, 0.3);
            color: #fff;
            border-radius: 2px;
            padding: 0 2px;
        }
        [data-theme="light"] .result-highlight { color: #000; }

        .empty-state { padding: 30px; text-align: center; color: var(--text-muted); }
        
        /* –ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        .fab-search {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 20px var(--primary-glow);
            cursor: pointer;
            z-index: 900;
            transition: 0.2s;
            color: #fff;
        }
        .fab-search:hover { transform: scale(1.1); }
        .fab-icon { font-size: 24px; }

    </style>
</head>
<body>

<script>
    // --- –ó–ê–©–ò–¢–ê –°–¢–†–ê–ù–ò–¶–´ (Auth Guard) ---
    // –≠—Ç–æ—Ç –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–ï–†–í–´–ú, –¥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —á–µ–≥–æ-–ª–∏–±–æ
    (function() {
        const savedAuth = localStorage.getItem('authData');
        
        // 1. –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç –≤ –ø–∞–º—è—Ç–∏
        if (!savedAuth) {
            window.location.href = 'index.html'; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≤—Ö–æ–¥
            return;
        }
        
        // 2. –ï—Å–ª–∏ –∫–ª—é—á –µ—Å—Ç—å, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ä–æ–∫
        try {
            const authData = JSON.parse(savedAuth);
            const now = new Date().getTime();
            
            if (now > authData.expiry) {
                // –°—Ä–æ–∫ –∏—Å—Ç–µ–∫
                localStorage.removeItem('authData'); // –£–¥–∞–ª—è–µ–º –ø—Ä–æ—Å—Ä–æ—á–∫—É
                window.location.href = 'index.html'; // –†–µ–¥–∏—Ä–µ–∫—Ç
                return;
            }
        } catch (e) {
            // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã
            localStorage.removeItem('authData');
            window.location.href = 'index.html';
            return;
        }

        // –ï—Å–ª–∏ –≤—Å—ë –æ–∫ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
        document.body.style.display = 'block';

        // --- –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º—ã ---
        const savedTheme = localStorage.getItem('siteTheme') || 'default';
        document.body.setAttribute('data-theme', savedTheme);

        const isGlow = localStorage.getItem('glowEffect') !== 'false';
        if (!isGlow) {
            document.documentElement.style.setProperty('--primary-glow', 'rgba(0, 0, 0, 0)');
        }
    })();
</script>

    <div class="container">
        <button class="back-btn" onclick="window.location.href='index.html'">‚Üê –í –º–µ–Ω—é</button>

        <h1>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –¢—é—Ä—å–º–∞ —Å—Ç—Ä–æ–≥–æ–≥–æ —Ä–µ–∂–∏–º–∞</h1>
        <div class="subtitle">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <kbd>Ctrl</kbd> + <kbd>F</kbd> –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞</div>

        <div class="alert-box">
            <strong>‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!</strong>
            <p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–∞–π—Ç–∞ –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. –í—ã –¥–µ–π—Å—Ç–≤—É–µ—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.</p>
        </div>
        
        <div id="rules-container"></div>
    </div>

    <div class="fab-search" onclick="openSearch()">
        <span class="fab-icon">üîç</span>
    </div>

    <div id="search-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="search-header">
                <input type="text" id="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è..." autocomplete="off">
            </div>
            <div id="search-results" class="search-results">
                <div class="empty-state">–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç...</div>
            </div>
        </div>
    </div>

<script>
    // –ë–ê–ó–ê –î–ê–ù–ù–´–• –ü–†–ê–í–ò–õ
    const rulesData = [
        {
            category: "–û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ",
            items: [
                ["–°—Ç–∞—Ç—å—è 1.1", "–¢–°–† - –≥–æ—Å–æ—Ä–≥–∞–Ω, –∑–∞–Ω–∏–º–∞—é—â–∏–π—Å—è –∑–∞–∫–ª—é—á—ë–Ω–Ω—ã–º–∏, —Å–æ–≤–µ—Ä—à–∏–≤—à–∏–º–∏ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ –∑–∞–∫–æ–Ω–∞ —à—Ç–∞—Ç–∞ –Ø–≤–∞."],
                ["–°—Ç–∞—Ç—å—è 1.2", "–ö–∞–∂–¥—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ–±—è–∑–∞–Ω –∑–Ω–∞—Ç—å —É—Å—Ç–∞–≤ –¢–°–† –∏ –æ–±—â–∏–π —É—Å—Ç–∞–≤ –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞ –û–±–æ—Ä–æ–Ω—ã."],
                ["–°—Ç–∞—Ç—å—è 1.3", "–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤—É —Ç—é—Ä—å–º—ã, –í–∏—Ü–µ-–ì—É–±–µ—Ä–Ω–∞—Ç–æ—Ä—É –∏ –ì—É–±–µ—Ä–Ω–∞—Ç–æ—Ä—É —à—Ç–∞—Ç–∞."],
                ["–°—Ç–∞—Ç—å—è 1.4", "–£—Å—Ç–∞–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –¢–°–† —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º, —Ä–µ–≥—É–ª–∏—Ä—É—é—â–∏–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã."]
            ]
        },
        {
            category: "–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",
            items: [
                ["–°—Ç–∞—Ç—å—è 2.1", "–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ—Ç–∏–≤–æ–¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è–º —Ä–µ–∂–∏–º–∞."],
                ["–°—Ç–∞—Ç—å—è 2.2", "–ü–µ—Ä–µ–≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ –∑–∞–∫–ª—é—á—ë–Ω–Ω—ã—Ö –¢–°–†."],
                ["–°—Ç–∞—Ç—å—è 2.3", "–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –∏ –∫—É–ª—å—Ç—É—Ä–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π (—Å 3-–≥–æ —Ä–∞–Ω–≥–∞)."],
                ["–°—Ç–∞—Ç—å—è 2.4", "–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ (–æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞–º–µ—Ä, –ø–∏—Ç–∞–Ω–∏–µ, —Ä–∞–±–æ—Ç—ã)."],
                ["–°—Ç–∞—Ç—å—è 2.5", "–ü–æ–¥—á–∏–Ω–µ–Ω–∏–µ –ù–∞—á–∞–ª—å–Ω–∏–∫—É —Ç—é—Ä—å–º—ã, –µ–≥–æ –∑–∞–º–∞–º –∏ –≥–ª–∞–≤–µ –æ—Ç–¥–µ–ª–∞."],
                ["–°—Ç–∞—Ç—å—è 2.6", "–°–¥–∞—á–∞ –æ—Ä—É–∂–∏—è, —Ä–∞—Ü–∏–∏ –∏ —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã."],
                ["–°—Ç–∞—Ç—å—è 2.7", "–ê–¥–µ–∫–≤–∞—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ –≤—Å–µ–º–∏ –≥—Ä–∞–∂–¥–∞–Ω–∞–º–∏."],
                ["–°—Ç–∞—Ç—å—è 2.8", "–ù–∞–ª–∏—á–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–∏ –Ω–∞ –æ—Ä—É–∂–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å 5-–≥–æ —Ä–∞–Ω–≥–∞)."],
                ["–°—Ç–∞—Ç—å—è 2.9", "–ó–∞–ø—Ä–µ—â–µ–Ω–æ –Ω–æ—à–µ–Ω–∏–µ –º–∞—Å–æ–∫ (–±–∞–ª–∞–∫–ª–∞–≤) –ø—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏."],
                ["–°—Ç–∞—Ç—å—è 2.10", "–ò–º–µ—Ç—å –ø—Ä–∏ —Å–µ–±–µ: –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç, –æ—Ä—É–∂–∏–µ, —Ä–∞—Ü–∏—é."],
                ["–°—Ç–∞—Ç—å—è 2.11", "–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É–∂–µ–±–Ω—ã–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏."]
            ]
        },
        {
            category: "–°—É–±–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∏ –æ–±—â–µ–Ω–∏–µ",
            items: [
                ["–°—Ç–∞—Ç—å—è 3.1", "–°—É–±–æ—Ä–¥–∏–Ω–∞—Ü–∏—è ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ —Ä–∞–∑–Ω—ã—Ö –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π."],
                ["–°—Ç–∞—Ç—å—è 3.2", "–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫–æ –≤—Å–µ–º –æ–∫—Ä—É–∂–∞—é—â–∏–º."],
                ["–°—Ç–∞—Ç—å—è 3.3", "–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å —É–≤–∞–∂–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∂–µ –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏."],
                ["–°—Ç–∞—Ç—å—è 3.4", "–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ –∑–∞–∫–ª—é—á—ë–Ω–Ω—ã–º –¢–°–†."],
                ["–°—Ç–∞—Ç—å—è 3.5", "–û–±—Ä–∞—â–µ–Ω–∏–µ –∫ –∫–æ–ª–ª–µ–≥–∞–º –ø–æ —Ä–∞–±–æ—á–∏–º –≤–æ–ø—Ä–æ—Å–∞–º —Å—Ç—Ä–æ–≥–æ –Ω–∞ ¬´–í—ã¬ª."],
                ["–°—Ç–∞—Ç—å—è 3.6", "–§–æ—Ä–º–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã: ¬´–î–∞, —Å—ç—Ä¬ª / ¬´–ù–µ—Ç, —Å—ç—Ä¬ª."],
                ["–°—Ç–∞—Ç—å—è 3.7", "–†–∞–∑—Ä–µ—à–µ–Ω–æ: ¬´–ë—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ, —Å—ç—Ä!¬ª, ¬´–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, —Å—ç—Ä!¬ª, ¬´–ö–∞–∫ —Å–∫–∞–∂–µ—Ç–µ, —Å—ç—Ä!¬ª."],
                ["–°—Ç–∞—Ç—å—è 3.8", "–ó–∞–ø—Ä–µ—â–µ–Ω–æ: ¬´–ü—Ä–∏–≤–µ—Ç¬ª, ¬´–ù–µ –∑–Ω–∞—é¬ª, ¬´–ó–¥—Ä–∞–≤–∏—è –∂–µ–ª–∞—é¬ª, ¬´–ò–∑–≤–∏–Ω–∏—Ç–µ¬ª –∏ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π —Å–ª–µ–Ω–≥."]
            ]
        },
        {
            category: "–ê–≤—Ç–æ–ø–∞—Ä–∫ –¢–°–†",
            items: [
                ["–°—Ç–∞—Ç—å—è 4.1", "–ê–≤—Ç–æ–ø–∞—Ä–∫ –≤–∫–ª—é—á–∞–µ—Ç: Hummer, Mesa, Barracks, Bus, Cargobob, Maverick."],
                ["–°—Ç–∞—Ç—å—è 4.2", "–ê–≤—Ç–æ–º–æ–±–∏–ª—å Mesa —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –±—Ä–∞—Ç—å —Å 7-–π –ø–æ—Ä—è–¥–∫–æ–≤–æ–π –¥–æ–ª–∂–Ω–æ—Å—Ç–∏."]
            ]
        },
        {
            category: "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã–µ –≤–∑—ã—Å–∫–∞–Ω–∏—è",
            items: [
                ["–°—Ç–∞—Ç—å—è 5.1", "–í–∑—ã—Å–∫–∞–Ω–∏–µ –≤—ã–¥–∞–µ—Ç—Å—è –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ —É—Å—Ç–∞–≤–∞/–∑–∞–∫–æ–Ω–æ–≤. –°—Ä–æ–∫ –≤—ã–¥–∞—á–∏: 5 –¥–Ω–µ–π. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –≤–∏–¥–µ–æ—Ñ–∏–∫—Å–∞—Ü–∏—è."],
                ["–°—Ç–∞—Ç—å—è 5.2.1", "–í—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–µ—Ç –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ (—Å—Ä–æ–∫ –æ—Ç 2 –¥–æ 5 –¥–Ω–µ–π)."],
                ["–°—Ç–∞—Ç—å—è 5.2.2", "–°–Ω—è—Ç–∏–µ —Å –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ (–ø–µ—Ä–µ–≤–æ–¥ –Ω–∏–∂–µ –∏–ª–∏ –æ—Ç—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞)."],
                ["–°—Ç–∞—Ç—å—è 5.2.3", "–ü–æ–Ω–∏–∂–µ–Ω–∏–µ –≤ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –Ω–∞ –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—É–ø–µ–Ω–µ–π."],
                ["–°—Ç–∞—Ç—å—è 5.2.4", "–í—ã–≥–æ–≤–æ—Ä. –ù–∞ —Å–Ω—è—Ç–∏–µ –¥–∞–µ—Ç—Å—è 72 —á–∞—Å–∞, –∏–Ω–∞—á–µ ‚Äî –ø–æ–Ω–∏–∂–µ–Ω–∏–µ –∏–ª–∏ —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ."],
                ["–°—Ç–∞—Ç—å—è 5.2.5", "–£–≤–æ–ª—å–Ω–µ–Ω–∏–µ (–ø–æ–ª–Ω–æ–µ –æ—Ç—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç —Å–ª—É–∂–±—ã)."],
                ["–°—Ç–∞—Ç—å—è 5.2.6", "–ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ú–û (–∑–∞–ø—Ä–µ—Ç –Ω–∞ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)."],
                ["–°—Ç–∞—Ç—å—è 5.2.7", "–£—Å—Ç–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ."],
                ["–°—Ç–∞—Ç—å—è 5.2.8", "–®—Ç—Ä–∞—Ñ (–ø–æ –ê–ö). –û–ø–ª–∞—Ç–∞ –≤ –∫–∞–∑–Ω—É –≤ —Ç–µ—á–µ–Ω–∏–µ 3 –¥–Ω–µ–π."],
                ["–°—Ç–∞—Ç—å—è 5.3", "–û–±–∂–∞–ª–æ–≤–∞–Ω–∏–µ –≤–∑—ã—Å–∫–∞–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞ –ø–æ—Ä—Ç–∞–ª–µ —à—Ç–∞—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –¥–Ω–µ–π."],
                ["–°—Ç–∞—Ç—å—è 5.4", "–í—ã–¥–∞–≤–∞—Ç—å –≤–∑—ã—Å–∫–∞–Ω–∏—è –º–æ–≥—É—Ç: –ù–∞—á–∞–ª—å–Ω–∏–∫ —Ç—é—Ä—å–º—ã –∏ –µ–≥–æ –ó–∞–º–µ—Å—Ç–∏—Ç–µ–ª–∏."]
            ]
        },
        {
            category: "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ä–∞—Å–ø–æ—Ä—è–¥–æ–∫",
            items: [
                ["–°—Ç–∞—Ç—å—è 6.1", "–û–±–µ–¥: 16:00 - 17:30 (–ü–Ω-–°–±). –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ ‚Äî –≤—ã—Ö–æ–¥–Ω–æ–π."],
                ["–°—Ç–∞—Ç—å—è 6.2", "–õ—é–±–æ–π –ø—Ä–æ–Ω–∏–∫—à–∏–π –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞—Ä—É—à–∏—Ç–µ–ª–µ–º."],
                ["–°—Ç–∞—Ç—å—è 6.3", "–°–≤–∏–¥–∞–Ω–∏—è: –î–Ω–µ–º 13:00-15:00 | –í–µ—á–µ—Ä–æ–º 17:00-20:00."],
                ["–°—Ç–∞—Ç—å—è 6.4", "–†–∞–∑—Ä–µ—à–µ–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –Ω–µ –±–æ–ª–µ–µ 2-—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π —Å –∑–∞–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –≤ —Å—É—Ç–∫–∏."],
                ["–°—Ç–∞—Ç—å—è 6.5", "–ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ú–ü ‚Äî 1 —á–∞—Å. –ú–µ–∂–¥—É –æ–±—ã—Å–∫–∞–º–∏ ‚Äî 4 —á–∞—Å–∞."],
                ["–°—Ç–∞—Ç—å—è 6.6", "–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å –Ω–µ –±–æ–ª–µ–µ 2-—Ö –æ–±—ã—Å–∫–æ–≤ –≤ —Å—É—Ç–∫–∏."]
            ]
        },

    ];

    // –ì–ï–ù–ï–†–ê–¶–ò–Ø –°–ü–ò–°–ö–ê
    const container = document.getElementById('rules-container');
    
    rulesData.forEach(cat => {
        const catDiv = document.createElement('div');
        catDiv.className = 'category-block';
        
        const title = document.createElement('div');
        title.className = 'category-title';
        title.textContent = cat.category;
        catDiv.appendChild(title);

        cat.items.forEach(item => {
            const row = document.createElement('div');
            row.className = 'rule-row';
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∂–µ—Å—Ç–∫–∏–µ –Ω–∞–∫–∞–∑–∞–Ω–∏—è –¥–ª—è –∫—Ä–∞—Å–Ω–æ–≥–æ —Å—Ç–∏–ª—è
            const isSevere = item[1].toLowerCase().includes('2000') || 
                             item[1].toLowerCase().includes('–±–∞–Ω') || 
                             item[1].toLowerCase().includes('—á—Å') ||
                             item[1].toLowerCase().includes('—Å–Ω—è—Ç–∏–µ');
                             
            const punishClass = isSevere ? 'rule-punishment severe' : 'rule-punishment';

            row.innerHTML = `
                <div class="rule-name">${item[0]}</div>
                <div class="${punishClass}">${item[1]}</div>
            `;
            catDiv.appendChild(row);
        });

        container.appendChild(catDiv);
    });

    // –ü–û–ò–°–ö
    const modal = document.getElementById('search-modal');
    const input = document.getElementById('search-input');
    const resultsContainer = document.getElementById('search-results');

    function openSearch() {
        modal.style.display = 'flex';
        input.focus();
    }

    function performSearch(query) {
        resultsContainer.innerHTML = '';
        if (!query) {
            resultsContainer.innerHTML = '<div class="empty-state">–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç...</div>';
            return;
        }

        const lowerQuery = query.toLowerCase();
        let count = 0;

        rulesData.forEach(cat => {
            cat.items.forEach(item => {
                const name = item[0];
                const punish = item[1];
                
                // –í–ê–ñ–ù–û–ï –ò–ó–ú–ï–ù–ï–ù–ò–ï: –ò–©–ï–ú –¢–û–õ–¨–ö–û –ü–û –ò–ú–ï–ù–ò –ü–†–ê–í–ò–õ–ê
                if (name.toLowerCase().includes(lowerQuery)) {
                    const el = document.createElement('div');
                    el.className = 'result-item';
                    
                    // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
                    const highlight = (text) => {
                        const regex = new RegExp(`(${query})`, 'gi');
                        return text.replace(regex, '<span class="result-highlight">$1</span>');
                    };

                    el.innerHTML = `
                        <div class="result-category">${cat.category}</div>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <span style="font-weight:500; margin-right:15px;">${highlight(name)}</span>
                            <span style="color:var(--warning); font-size:0.85em;">${punish}</span>
                        </div>
                    `;
                    
                    // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø—Ä–∞–≤–∏–ª—É –ø—Ä–∏ –∫–ª–∏–∫–µ
                    el.onclick = () => {
                        modal.style.display = 'none';
                        const elements = document.querySelectorAll('.rule-name');
                        for (let elem of elements) {
                            if (elem.innerText === name) {
                                elem.scrollIntoView({behavior: "smooth", block: "center"});
                                elem.parentElement.style.border = '2px solid var(--primary)';
                                setTimeout(() => elem.parentElement.style.border = '1px solid rgba(255,255,255,0.05)', 2000);
                                break;
                            }
                        }
                    };

                    resultsContainer.appendChild(el);
                    count++;
                }
            });
        });

        if (count === 0) {
            resultsContainer.innerHTML = '<div class="empty-state">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
        }
    }

    input.addEventListener('input', (e) => performSearch(e.target.value));

    // Hotkeys
    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && (e.key === 'f' || e.key === '–∞' || e.key === 'F')) {
            e.preventDefault();
            openSearch();
        }
        if (e.key === 'Escape') {
            modal.style.display = 'none';
            input.value = '';
            performSearch('');
        }
    });

    modal.addEventListener('click', (e) => {
        if (e.target === modal) modal.style.display = 'none';
    });
</script>

</body>
</html>

